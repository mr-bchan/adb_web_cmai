<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> -->
    <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/chat.css">
    <title>Neural Mechanics</title>

    <style type="text/css">
        .mb-3 a: hover {
    /*text-shadow: 1px 1px 0 lighten(#0BAAD4, 15%), 2px 2px 0 lighten(#0BAAD4, 10%), 3px 3px 0 lighten(#0BAAD4, 5%);
    transform: translate(-3px,-3px);*/
    color:red !important;
}
    </style>
    
        <style type="text/css">
body {cursor: url("images/cursor_v2.png"),auto;}
</style>
    
</head>

<body>
    <header class="header">
        <div class="logo">
            <img src="images/logo.png">
        </div>
        <div class="header-container">
            <div class="row">
                <!-- <div class="col-sm"></div> -->
                <div class="search-div col-lg">
                    <form class="">
                        <h2>Let's start!</h2>
                        <!--             <input type="text" class="form-control" name="search" placeholder="Search">
<button><i class="fas fa-search"></i></button> -->
                        <div class="input-group mb-3">
                            <input type="text" class="form-control txt-search" placeholder="Enter a topic or keywords here" aria-label="Search" aria-describedby="Search">
                            <!-- <div class="input-group-append">
                                <span class="input-group-text" id=""><i class="fas fa-search"></i></span>
                                <button class="input-group-button" type="submit"><i class="fas fa-search"></i></button>
                            </div> -->
                            <button class="btn-search animate-grow" type="button">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="-5 -5 270 300">
                              <!-- <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path> -->
                              <path d="M244.186,214.604l-54.379-54.378c-0.289-0.289-0.628-0.491-0.93-0.76
        c10.7-16.231,16.945-35.66,16.945-56.554C205.822,46.075,159.747,0,102.911,0S0,46.075,0,102.911
        c0,56.835,46.074,102.911,102.91,102.911c20.895,0,40.323-6.245,56.554-16.945c0.269,0.301,0.47,0.64,0.759,0.929l54.38,54.38
        c8.169,8.168,21.413,8.168,29.583,0C252.354,236.017,252.354,222.773,244.186,214.604z M102.911,170.146
        c-37.134,0-67.236-30.102-67.236-67.235c0-37.134,30.103-67.236,67.236-67.236c37.132,0,67.235,30.103,67.235,67.236
        C170.146,140.044,140.043,170.146,102.911,170.146z"></path>
                            </svg>
                          </button>
                        </div>
                    </form>
                    <div class="center">
                        <label class="topics-label">Topics</label>
                        <span class="badge topic-badge badge-primary animate-grow">beijing air pollution</span>
                        <span class="badge topic-badge badge-primary animate-grow">environment</span>
                        <span class="badge topic-badge badge-primary animate-grow">urban development</span>
                        <span class="badge topic-badge badge-primary animate-grow">health</span>
                        <span class="badge topic-badge badge-primary animate-grow">road traffic</span>
                    </div>
                </div>
                <!-- <div class="col-sm"></div> -->
            </div>
        </div>
        <div id="particles-js"></div>
    </header>
    <!-- <div class="btn-toggle-sidebar-container"> -->
    
    <!-- </div> -->
    <div class="section-container">
        <button class="btn-toggle-sidebar btn-open" id="sidebar-aside">
            <i class="fas fa-arrow-left"></i>
        </button>
        <aside class="sidebar d-none">
            <div class="btn-toggle-sidebar-container">
                <button class="btn-toggle-sidebar btn-close">
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
            <ul class="nav nav-tabs">
                <li class="nav-item">
                    <a class="d-block text-center nav-link active " href="#" data-tab="tab-all">
                        <div class="count">3</div>
                        <div>All</div>
                    </a>
                </li>
                <li class="d-block nav-item">
                    <a class="d-block text-center  nav-link" href="#" data-tab="tab-cause">
                        <div class="count">3</div>
                        <div>Cause</div>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="d-block text-center nav-link" href="#" data-tab="tab-effect">
                        <div class="count">0</div>
                        <div>Effect</div>
                    </a>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane active" id="tab-all">
                    <p><span class="tab-selected-count">0</span> selected item(s)</p>
                    <div class="tab-pane-list">
                        <h5 class="search-result-item-title"><i class="far fa-circle"></i>Deforestration</h5>
                        <div class="search-result-item-details">
                            <div class="mb-3">
                                <a href="#" class="a-provided-by">Source: Provided by User</a>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane-list">
                        <h5 class="search-result-item-title"><i class="far fa-circle"></i>Deforestration</h5>
                        <div class="search-result-item-details">
                            <div class="mb-3">
                                <a href="#" class="a-provided-by">Source: Provided by User</a>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane-list">
                        <h5 class="search-result-item-title"><i class="far fa-circle"></i>Deforestration</h5>
                        <div class="search-result-item-details">
                            <div class="mb-3">
                                <a href="#" class="a-provided-by">Source: Provided by User</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" id="tab-cause">
                    <p><span class="tab-selected-count">0</span> cause(s) selected</p>
                    <div class="tab-pane-list">
                        <h5 class="search-result-item-title"><i class="far fa-circle"></i>Deforestration</h5>
                        <div class="search-result-item-details">
                            <div class="mb-3">
                                <a href="#" class="a-provided-by">Source: Provided by User</a>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane-list">
                        <h5 class="search-result-item-title"><i class="far fa-circle"></i>Deforestration</h5>
                        <div class="search-result-item-details">
                            <div class="mb-3">
                                <a href="#" class="a-provided-by">Source: Provided by User</a>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane-list">
                        <h5 class="search-result-item-title"><i class="far fa-circle"></i>Deforestration</h5>
                        <div class="search-result-item-details">
                            <div class="mb-3">
                                <a href="#" class="a-provided-by">Source: Provided by User</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" id="tab-effect">
                    <p><span class="tab-selected-count">0</span> effect(s) selected</p>
                    <div class="text-center py-4">
                        <svg version="1.1" id="Layer_1" focusable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     x="0px" y="0px" width="180px" height="180px" viewBox="0 0 180 180" enable-background="new 0 0 180 180" xml:space="preserve">
                            <path fill="#595C65" d="M4.363,52.038l81.893,37.15c2.391,1.086,5.094,1.086,7.484,0l81.894-37.15c5.818-2.64,5.818-11.433,0-14.073
                            L93.744,0.812c-2.377-1.086-5.108-1.086-7.485,0L4.363,37.962C-1.456,40.602-1.456,49.398,4.363,52.038z M175.637,83.074
                            l-20.422-9.257L98.389,99.576c-2.658,1.206-5.481,1.818-8.389,1.818s-5.727-0.612-8.388-1.818L24.789,73.817L4.363,83.074
                            c-5.818,2.637-5.818,11.426,0,14.062l81.893,37.121c2.391,1.083,5.094,1.083,7.484,0l81.896-37.121
                            C181.455,94.5,181.455,85.711,175.637,83.074z M175.637,128.004l-20.345-9.222l-56.903,25.794c-2.658,1.206-5.481,1.818-8.389,1.818
                            s-5.727-0.612-8.388-1.818l-56.9-25.794l-20.349,9.222c-5.818,2.637-5.818,11.426,0,14.062l81.893,37.121
                            c2.391,1.083,5.094,1.083,7.484,0l81.896-37.121C181.455,139.43,181.455,130.641,175.637,128.004z"/>
                        </svg>
                        <h5>No Record</h5>
                        <p>Please select on the problem to view list</p>
                    </div>
                </div>
            </div>
            <button class="btn-generate-tree">Generate Tree</button>
        </aside>
        <section class="section">
            <div class="result-header d-flex justify-content-between mb-4">
                <h5 id='div-result-header'></h5>
                <button class="btn btn-primary btn-show-all btn-primary-custom">Show all</button>
            </div>
            <ul class="search-result-list">
                <li class="search-result-item">
                    <h5 class="search-result-item-title selected"><i class="fas fa-check-circle"></i>Deforestration</h5>
                    <div class="search-result-item-details">
                        <div class="mb-3">
                            <a href="#" class="a-provided-by effect-5">Source: Provided by User</a>
                        </div>
                        <div class="mb-3">
                            <div><span>Project Number: </span><span>45021-002</span></div>
                            <div><span>Country: </span><span>People's Repubdivc of China</span></div>
                            <div><span>Section: </span><span>||. THE PROJECT</span></div>
                        </div>
                        <div>
                            <span class="badge badge-document">Document RRP</span>
                        </div>
                    </div>
                </li>
                <li class="search-result-item">
                    <h5 class="search-result-item-title"><i class="far fa-circle"></i>Deforestration</h5>
                    <div class="search-result-item-details">
                        <div class="mb-3">
                            <a href="#" class="a-provided-by">Source: Provided by User</a>
                        </div>
                        <div class="mb-3">
                            <div><span>Project Number: </span><span>45021-002</span></div>
                            <div><span>Country: </span><span>People's Repubdivc of China</span></div>
                            <div><span>Section: </span><span>||. THE PROJECT</span></div>
                        </div>
                        <div>
                            <span class="badge badge-document">Document RRP</span>
                        </div>
                    </div>
                </li>
                <li class="search-result-item">
                    <h5 class="search-result-item-title"><i class="far fa-circle"></i>Deforestration</h5>
                    <div class="search-result-item-details">
                        <div class="mb-3">
                            <a href="#" class="a-provided-by">Source: Provided by User</a>
                        </div>
                        <div class="mb-3">
                            <div><span>Project Number: </span><span>45021-002</span></div>
                            <div><span>Country: </span><span>People's Repubdivc of China</span></div>
                            <div><span>Section: </span><span>||. THE PROJECT</span></div>
                        </div>
                        <div>
                            <span class="badge badge-document">Document RRP</span>
                        </div>
                    </div>
                </li>
                <li class="search-result-item">
                    <h5 class="search-result-item-title"><i class="far fa-circle"></i>Deforestration</h5>
                    <div class="search-result-item-details">
                        <div class="mb-3">
                            <a href="#" class="a-provided-by">Source: Provided by User</a>
                        </div>
                        <div class="mb-3">
                            <div><span>Project Number: </span><span>45021-002</span></div>
                            <div><span>Country: </span><span>People's Repubdivc of China</span></div>
                            <div><span>Section: </span><span>||. THE PROJECT</span></div>
                        </div>
                        <div>
                            <span class="badge badge-document">Document RRP</span>
                        </div>
                    </div>
                </li>
            </ul>
        </section>    
        
    </div>
    <div class="chat-div">
        <div class="chat-box-wrapper">
            <div class="chat-box">
                <div class="chat-header text-center">Chat</div>
                <div class="chat-convo">
                    <div class="sender-wrapper">
                        <div class="sender d-flex justify-content-start">
                            <div class="sender-img-wrapper"><img src="images/bee.png"></div>
                            <div class="sender-msg-wrapper">
                                <div class="sender-msg">
                                    <div class="sender-name">AidBee</div>
                                    <div class="sender-content">Hi! I'm AidBee, your personal assistant <br> just a buzz away! <br> How may I help you?</div>
                                </div>
                                <div class="time-sent">
                                    4:30 PM
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="receiver">
                            <div class="receiver-msg-wrapper d-flex justify-content-end">
                                <div class="receiver-msg">Hello</div>
                                <i class="invisible align-self-end sent fas fa-check-circle"></i>
                            </div>
                            <div class="d-none time-sent">
                                4:30 PM
                            </div>
                    </div>
                    <div class="receiver">
                            <div class="receiver-msg-wrapper d-flex justify-content-end">
                                <div class="receiver-msg">May I see the top keywords <br> for this topic?</div><i class="align-self-end sent fas fa-check-circle"></i>
                            </div>
                            <div class="time-sent">
                                4:30 PM
                            </div>
                    </div>
                                    <div class="sender-wrapper">
                        <div class="sender d-flex justify-content-start">
                            <div class="sender-img-wrapper"><img src="images/bee.png"></div>
                            <div class="sender-msg-wrapper">
                                <div class="sender-msg">
    <!--                                 <div class="sender-name">Customer Service</div>
                                    <div class="sender-content">Welcome to ADB <br> How may I help you</div> -->
                                    <div class="ticontainer">
                                      <div class="tiblock">
                                        <div class="tidot"></div>
                                        <div class="tidot"></div>
                                        <div class="tidot"></div>
                                      </div>
                                    </div>
                                </div>
                                <div class="d-none time-sent">
                                    4:30 PM
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="receiver">
                        <div class="receiver-msg-wrapper d-flex justify-content-end">
                            <div class="receiver-msg">
                                <div class="ticontainer">
                                  <div class="tiblock">
                                    <div class="tidot"></div>
                                    <div class="tidot"></div>
                                    <div class="tidot"></div>
                                  </div>
                                </div>
                            </div><i class="d-none align-self-end sent fas fa-check-circle"></i>
                        </div>
                        <div class="d-none time-sent">
                            4:30 PM
                        </div>
                    </div>
                </div>
                <form id="chat-form" class="d-flex justify-content-start">
                    <!-- <input type="text" name="message" placeholder="Write a Message..."> -->
                    <textarea name="message" placeholder="Write a Message..."></textarea>
                    <button onclick="return false;">
                        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                             width="61.25px" height="61.25px" viewBox="0 0 61.25 61.25" enable-background="new 0 0 61.25 61.25" xml:space="preserve">
                            <path fill="#B3BEC6" d="M31.708,31.348L7.363,33.705L0.955,54.196c-0.528,1.672,0.399,3.456,2.072,3.984
                                c0.777,0.247,1.619,0.183,2.351-0.176l53.358-25.836c1.507-0.735,2.134-2.553,1.399-4.06c-0.297-0.609-0.79-1.101-1.399-1.398
                                L5.416,0.855C3.84,0.084,1.938,0.737,1.168,2.313C0.81,3.045,0.747,3.887,0.992,4.665L7.4,25.155l24.299,2.356
                                c1.055,0.105,1.825,1.043,1.721,2.099c-0.09,0.91-0.81,1.63-1.721,1.72L31.708,31.348z"/>
                        </svg>
                    </button>
                </form>
            </div>
        </div>
        <div class="text-right">
            <button class="btn-chat show animate-bounce">
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="147.167px" height="149.167px" viewBox="0 0 147.167 149.167" enable-background="new 0 0 147.167 149.167"
     xml:space="preserve">
                    <title>1</title>
                    <path fill="#FFFFFF" d="M122.578,1H24.422C11.763,1,1.5,11.457,1.5,24.369v65.987c0,0.486,0.02,0.964,0.048,1.443
                        c-0.03,0.234-0.046,0.473-0.048,0.709v49.635c0,3.156,1.654,3.806,3.676,1.406l25.237-29.768h92.166
                        c12.655,0,22.922-10.51,22.922-23.425V24.369C145.5,11.457,135.236,1,122.578,1z"/>
                </svg>
            </button>
            <button class="btn-chat hide">
                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="180px" height="180px" viewBox="0 0 180 180" enable-background="new 0 0 180 180" xml:space="preserve">
                    <g id="Close">
                        <path fill="#FFFFFF" d="M111.393,90l64.178-64.177c5.907-5.907,5.907-15.485,0-21.392c-5.908-5.908-15.485-5.908-21.393,0
                            L90,68.608L25.822,4.43c-5.907-5.908-15.484-5.908-21.392,0c-5.907,5.908-5.907,15.486,0,21.392l64.178,64.177L4.43,154.177
                            c-5.907,5.907-5.907,15.485,0,21.392c5.908,5.908,15.485,5.908,21.392,0L90,111.392l64.178,64.177
                            c5.906,5.908,15.484,5.908,21.393,0c5.907-5.907,5.907-15.484,0-21.392L111.393,90z"/>
                    </g>
                </svg>
            </button>
        </div>
    </div>
    <!-- <footer>Footer here!</footer> -->
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/ScrollMagic.min.js"></script> -->
    <!-- scripts -->
    <script src="js/particles.js"></script>
    <script src="js/app.js"></script>

    <!-- User functions declared here -->
    <script src="js/requests.js" ></script>
    <script src="js/config.js" ></script>
    <script src="js/update_problems.js" ></script>
    <script src="js/update_cause_effects.js" ></script>
    <script src="js/update_tree.js" ></script>

    <!-- stats.js -->
    <script src="js/lib/stats.js"></script>
    <!-- chat.js -->
    <script type="text/javascript" src="js/chat.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        if ($("#tab-all").find('.tab-pane-list').length > 0) {
            $('.btn-generate-tree').addClass('btn-active');
        } else {
            $('.btn-generate-tree').removeClass('btn-active');
        }

        // checkboxes result
        $(document).on('click', '.search-result-item-title', function(event) {
            event.preventDefault();
            $(this).find('i').removeClass();
            var isSelected = $(this).hasClass('selected');
            if (isSelected) {
                $(this).find('i').addClass('far fa-circle');
                $(this).removeClass('selected');
            } else {
                $(this).find('i').addClass('fas fa-check-circle');
                $(this).addClass('selected');
            }
            var selector = $(this);
            var tabId = selector.parent().parent().attr('id');
            var selectedItems = $("#"+tabId).find('h5.selected').length;

            selector.parent().siblings().find('span.tab-selected-count').text(selectedItems);
        });


        $(document).on('click', '.search-problem-result', function(event){
            keyword = $(this)[0].textContent
           update_cause_effect(keyword=keyword)
        })

        // nav tab 
        $('.sidebar .nav.nav-tabs .nav-link').on('click', function(event) {
            event.preventDefault();
            $('.sidebar .nav.nav-tabs .nav-link').removeClass('active');
            $('.sidebar .tab-pane').removeClass('active');
            $(this).addClass('active');
            var tab = $(this).data('tab');
            $("#"+tab).addClass('active');

            if ($("#"+tab).find('.tab-pane-list').length > 0) {
                $('.btn-generate-tree').addClass('btn-active');
            } else {
                $('.btn-generate-tree').removeClass('btn-active');
            }
            /* Act on the event */
        });

        // sidebar 

        $('.btn-toggle-sidebar').on('click', function(event) {
            event.preventDefault();
            $('aside.sidebar').toggleClass('d-none');
            if ($('aside.sidebar').hasClass('d-none')) {
                $('.btn-show-all').show();
            } else {
                $('.btn-show-all').hide();
            }

            $(this).blur();
            /* Act on the event */
        });


        $(document).on("click", ".topic-badge", function(){
            $(".txt-search")[0].value = $(this)[0].textContent
            $('.btn-search').click()
             
        })

        $(document).on("click", ".search-result-item .search-result-item-title", function() {
            var isSelected = $(this).hasClass('selected');

            if (isSelected) {
                if ($('.sidebar').hasClass('d-none')) {
                    $("#sidebar-aside").trigger('click');
                }
            }
        });


        $('.btn-search').on('click', function()
        {
            keyword = $(".txt-search")[0].value
            update_problems(keyword=keyword)
            
            $('div.section-container,button.btn-toggle-sidebar').attr({'style': 'display:block;'});

            $('html,body').animate({
                scrollTop: $(".btn-open").offset().top
            },'slow');

            $(".search-result-item").delay(500).each(function(i) {
                $(this).delay(300 * i).queue(function() {
                    $(this).addClass("show");
                });
            });
        });

        $(".btn-generate-tree").on('click', function()
        {

            // Get values from user selections
            keyword = $(".txt-search").val()
            problems = $('.search-result-list h5.selected').map(function(){ return this.innerText }).get()
            causes = $('#tab-cause h5.selected').map(function(){ return this.innerText }).get()
            effects = $('#tab-effect h5.selected').map(function(){ return this.innerText }).get()

            data = {
                'cause':causes,
                'problem': problems,
                'effect': effects,
                'keyword': keyword
            }

            sessionStorage.setItem('data', JSON.stringify(data));

            // window.location = "tree.html"
            window.open('tree.html','_blank');

        })

    });

    </script>
</body>

</html>
